<!DOCTYPE html>
<html>
<body>
  <div id="gallery"></div>
  <script>
    Promise.all([
      fetch('mediaList.json').then(r => r.json()),
      fetch('mapping.json').then(r => r.json())
    ]).then(([mediaList, mapping]) => {
      let container = document.getElementById('gallery');
      mediaList.forEach(student => {
        let sid = student.student_id;
        let section = document.createElement('div');
        section.innerHTML = `<h3>學生 ${sid}</h3>`;
        student.media.forEach(media => {
          let id = mapping[media.file]; // mapping.json 要有 "filename": "fileId"
          if (id) {
            let w = (media.type === 'audio') ? 320 : 640;
            let h = (media.type === 'audio') ? 60 : 360;
            section.innerHTML += `<iframe src="https://drive.google.com/file/d/${id}/preview" width="${w}" height="${h}" allow="autoplay"></iframe><br>`;
          }
        });
        container.appendChild(section);
      });
    });
  </script>
</body>
</html>

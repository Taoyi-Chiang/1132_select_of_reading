<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>多媒體學生作品展</title>
  <style>
    #start-show-btn {
      font-size: 1.5em; padding: 1em 2em; background: #563F2E; color: #fff; border: none; border-radius: 1em; margin-bottom: 2em; cursor: pointer;
    }
    .student-block { border:1px solid #eee; margin:1em 0; padding:1em; border-radius:1em;}
  </style>
</head>
<body>
  <h1>學生多媒體作品展</h1>
  <button id="start-show-btn" onclick="location.href='show.html'">▶ 啟動現場自動播放</button>
  <div id="gallery"></div>
  <script>
  Promise.all([
    fetch('mediaList.json').then(r => r.json()),
    fetch('mapping.json').then(r => r.json())
  ]).then(([mediaList, mapping]) => {
    let container = document.getElementById('gallery');
    mediaList.forEach(student => {
      let sid = student.student_id;
      let section = document.createElement('div');
      section.className = "student-block";
      section.innerHTML = `<h3>學生 ${sid}</h3>`;
      // 展示第一個媒體做為縮圖
      let mainMedia = student.media[0];
      if (mainMedia) {
        let url = mapping[mainMedia.file];
        if (mainMedia.type === 'slide') {
          section.innerHTML += `<img src="${url}" width="200"><br>`;
        } else if (mainMedia.type === 'video') {
          section.innerHTML += `<video src="${url}" width="200" controls></video><br>`;
        } else if (mainMedia.type === 'audio') {
          section.innerHTML += `<audio src="${url}" controls></audio><br>`;
        }
      }
      // 進入互動展示按鈕
      section.innerHTML += `<a href="student_${sid}.html" target="_blank"><button>進入互動展示</button></a>`;
      container.appendChild(section);
    });
  });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>學生多媒體展首頁</title>
</head>
<body>
  <h1>學生多媒體展</h1>
  <div id="studentList"></div>
  <script>
    Promise.all([
      fetch('mediaList.json').then(r => r.json()),
      fetch('mapping.json').then(r => r.json())
    ]).then(([mediaList, mapping]) => {
      let list = document.getElementById('studentList');
      mediaList.forEach(student => {
        let sid = student.student_id;
        let block = document.createElement('div');
        block.style = "border:1px solid #eee; margin:1em; padding:1em;";
        let firstMedia = student.media && student.media[0];
        block.innerHTML = `<b>學生 ${sid}</b><br>`;
        if (firstMedia) {
          let id = mapping[firstMedia.file];
          block.innerHTML += `<iframe src="https://drive.google.com/file/d/${id}/preview" width="180" height="130"></iframe><br>`;
        }
        block.innerHTML += `<button onclick="location.href='student.html?sid=${sid}'">進入作品</button>`;
        list.appendChild(block);
      });
    });
  </script>
</body>
</html>
